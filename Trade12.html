<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trade Attivi Portfolio</title>
    <link rel="icon" type="image/png" href="favicon.png"> 
    <link rel="stylesheet" href="css/trade.css">
    <link rel="stylesheet" href="css/menusotto.css">
	<link rel="stylesheet" href="css/style.css">
</head>
<body>

  <div class="container">
    <div class="header">
  <h1>üî• Trade Attivi</h1>


<div style="height: 18px; line-height: 18px; text-align: left; font-size: 16px; color: white; padding-left: 25px; padding-top: 15px; padding-bottom: 20px;">
  <a href="https://beneinst.github.io/tradingspot/" class="link-no-underline">Home</a> |
  <a href="https://beneinst.github.io/tradingspot/operativita.html" class="link-no-underline">Operativit√†</a> |
  <a href="https://beneinst.github.io/tradingspot/Trade12.html" class="link-no-underline">Trade Attivi</a> |
  <a href="https://beneinst.github.io/tradingspot/panoramica-capitale.html" class="link-no-underline">Panoramica Capitale</a>
  
</div>
</div>

        
               
        <div  style="height: 18px; line-height: 18px; color: white; padding-left: 25px; padding-top: 5px; padding-bottom: 20px;"><em>
  *Gestione <strong>Trade</strong> Singoli con Accumulo e Prezzo Medio.</em>
</div>
  

        <div class="card">
            <h3 class="section-title" style="color: #99C68E !important;">üí± Aggiungi Entry al Trade</h3>
            <form id="trade-form" class="trade-form">
                <div class="form-row">
                    <label for="crypto-symbol" style="color: #8EEBEC !important;">SIMBOLO CRIPTO</label>
                    <input type="text" id="crypto-symbol" placeholder="BTC" required>
                </div>
                <div class="form-row">
                    <label for="trade-quantity" style="color: #8EEBEC !important;">QUANTITA'</label>
                    <input type="number" id="trade-quantity" step="0.00000001" placeholder="0.00000000" required>
                </div>
                <div class="form-row">
                    <label for="trade-price" style="color: #8EEBEC !important;">IMPORTO ENTRY(USDT):</label>
                    <input type="number" id="invested-amount" placeholder="Importo investito ($)" step="0.01" required>
                </div>
                <div class="form-row">
                    <label></label>
                    <button type="submit" class="btn-primary">Aggiungi Entry</button>
                </div>
                <input type="hidden" id="edit-trade-id">
            </form>
        </div>

        <div class="form-container">
            <h4 class="section-title" style="color: #99C68E !important;">üéØ I tuoi Trade Attivi</h4>
            <div id="trades-container"></div>
        </div>

        <div class="card">
            <div class="container">
                <h3 style="color: #99C68E !important;">üíΩ Backup & Ripristino</h3>
				</div>
				<div class="container_f">
            
				<div class="card">
				<p></p>
			<p>Scarica il Report dei Trade Attivi formato Html</p>
			<div style="padding: 5px;"></div>
			<button onclick="stampaTuttiTrade()" class="btn-edit">üìä Report Trade Attivi</button>
			<div style="padding: 15px;"></div>
            <p>Salva e carica i tuoi dati per trasferirli tra dispositivi diversi.</p>
			<div style="padding: 5px;"></div>
           
                <button onclick="scaricaDati()" class="btn-edit">Scarica Dati (JSON)</button>
                <input type="file" id="fileInput" accept=".json" style="flex: 1;">
                <button onclick="caricaDati()" class="btn-edit">Carica Dati</button>
				
            </div>
        </div></div>

     
		
		
	<!-- FOOTER -->
<div class="container" style="padding-top: 12px; padding-bottom: 12px;">
  <!-- BLOCCO MENU -->
  <div class="iflow-body">
    <nav class="iflow-custom-menu">
      <ul>
        <li>
          <div class="iflow-menu-label">Home</div>
          <ul>
            <li><a href="https://beneinst.github.io/tradingspot/">Home</a></li>
          </ul>
        </li>
        <li>
          <div class="iflow-menu-label">Gestione</div>
          <ul>
            <li><a href="https://beneinst.github.io/tradingspot/operativita.html">Operativit√†</a></li>
            <li><a href="https://beneinst.github.io/tradingspot/Trade12.html">Trade Attivi</a></li>
            <li><a href="https://beneinst.github.io/tradingspot/panoramica-capitale.html">Panoramica Capitale</a></li>
            <li><a href="https://beneinst.github.io/tradingspot/blocco-note.html">Blocco Note</a></li>
          </ul>
        </li>
        <li>
          <div class="iflow-menu-label">Strategia 4H</div>
          <ul>
            <li><a href="https://beneinst.github.io/tradingspot/regole-trading.html">Regole</a></li>
            <li><a href="https://beneinst.github.io/tradingspot/Strategia-Trading.html">Indicatore</a></li>
            <li><a href="https://beneinst.github.io/tradingspot/chartflow/index.html">Segnali</a></li>
          </ul>
        </li>
        <li>
          <div class="iflow-menu-label">Fondamenti</div>
          <ul>
            <li><a href="https://beneinst.github.io/tradingspot/cheat-sheet.html">Patterns</a></li>
            <li><a href="https://beneinst.github.io/tradingspot/candlestick.html">Candlestick</a></li>
          </ul>
        </li>
      </ul>
    </nav>
  </div>
  </div>
<div style="padding: 5px;"></div>  

<div class="container">
  <div class="container-f" style="padding-top: 1px; padding-bottom: 1px;">
    <div style="display: flex; align-items: center; justify-content: space-between;">
      <p style="margin: 0; color: #c3c3c3; text-align: left; height: 10px; line-height: 12px;">
        ¬© 2025 Invest Flow | Trading Spot di Gerardo D'Orrico ‚Äì Tutti i diritti riservati.
      </p>
      <img src="images/logoinvest2.svg"
           alt="Invest Flow"
           style="height: 40px; width: auto; margin-left: 16px;" />
    </div>
  </div>
</div>


<script src="js/trade.js"></script>


// Script di test completo da inserire nella tua pagina HTML
<script type="module">
  import { initFirebase, caricaDatiPagina, salvaDatiPagina } from './firebase-utils.js';
  
  const nomePagina = "operativita";
  let datiCorrenti = null;
  
  // Test completo
  async function testFirebase() {
    try {
      console.log("üöÄ Inizio test Firebase...");
      
      // 1. Inizializza Firebase
      await initFirebase();
      console.log("‚úÖ Firebase inizializzato");
      
      // 2. Carica dati esistenti
      datiCorrenti = await caricaDatiPagina(nomePagina);
      
      // 3. Test di salvataggio
      const datiTest = {
        timestamp: new Date().toISOString(),
        trades: [
          { simbolo: "AAPL", quantita: 100, prezzo: 150 },
          { simbolo: "MSFT", quantita: 50, prezzo: 300 }
        ],
        bilancio: 25000
      };
      
      console.log("üîÑ Salvataggio dati test...");
      await salvaDatiPagina(nomePagina, datiTest);
      
      // 4. Ricarica per verificare
      console.log("üîÑ Ricaricamento per verifica...");
      const datiRicaricati = await caricaDatiPagina(nomePagina);
      
      if (datiRicaricati) {
        console.log("üéâ TEST SUPERATO! Persistenza funziona");
        console.log("Dati ricaricati:", datiRicaricati);
      } else {
        console.log("‚ùå TEST FALLITO! Persistenza non funziona");
      }
      
    } catch (error) {
      console.error("üí• Errore durante il test:", error);
    }
  }
  
  // Avvia il test
  testFirebase();
  
  // Funzione per salvare (collegala ai tuoi pulsanti)
  window.salvaDatiTrading = function() {
    if (datiCorrenti) {
      // Aggiorna datiCorrenti con i nuovi valori dalla UI
      datiCorrenti.ultimoAggiornamento = new Date().toISOString();
      salvaDatiPagina(nomePagina, datiCorrenti);
    }
  }
</script>


</body>
</html>